(()=>{const e=document.getElementById("search-btn"),t=document.getElementById("search-input"),a=document.getElementById("city-search");function n(e,t){const a="forecast-day"!==e.classList[0]?2:0;switch(t.condition.split(" ")[a]){case"Clear":default:e.style.backgroundColor="white";break;case"Sunny":e.style.backgroundColor="rgba(254, 254, 176, 0.983)";break;case"Partly":e.style.backgroundColor="rgba(186, 231, 230, 0.983)";break;case"Cloudy":e.style.backgroundColor="rgba(225, 225, 225, 0.9)";break;case"Overcast":e.style.backgroundColor="rgb(225, 225, 225, 0.683)";break;case"Light":case"Fog":e.style.backgroundColor="rgba(220, 235, 241, 0.932)";break;case"Moderate":e.style.backgroundColor="rgba(161, 207, 226, 0.932)";break;case"Heavy":e.style.backgroundColor="rgba(83, 163, 197, 0.932)";break;case"Patchy":e.style.backgroundColor="rgb(228, 229, 182)"}}e.addEventListener("click",(()=>{(async function(e){try{const t=document.getElementById("search-feedback");t.textContent="Searching . . . ";const a=`https://api.weatherapi.com/v1/forecast.json?key=1fdeb95185c145f0809201723232908&q=${e}&days=3&aqi=yes&alerts=no`,n=await fetch(a,{mode:"cors"});return n.ok?t.textContent="":t.textContent=`City "${e}" not found. Check search and try again`,n.json()}catch(e){return null}})(a.value).then((e=>function(e){!function(e){const t=document.getElementById("city");t.hasChildNodes()&&(t.innerHTML=""),document.getElementById("title").textContent=`What's the weather in ${e.city}?`,Object.keys(e).forEach((a=>{const n=document.createElement("div");n.className=`${a}`,n.textContent=`${e[a]}`,t.appendChild(n)})),t.classList.add("visible")}(e.place),function(e){const t=document.getElementById("nowcast");t.hasChildNodes()&&(t.innerHTML=""),n(t,e),Object.keys(e).forEach((a=>{const n=document.createElement("div");if(n.className=`${a}`,"condition"===a?n.innerHTML=`Current Weather<br>${e[a]}`:n.textContent=`${e[a]}`,t.appendChild(n),"conditionIcon"===a){n.innerHTML="";const t=document.createElement("img");t.src=`${e[a]}`,n.appendChild(t)}})),t.classList.add("visible")}(e.current),function(e){const t=document.getElementById("forecast");t.hasChildNodes()&&(t.innerHTML="");let a=0;e.forEach((e=>{const c=document.createElement("div");c.className="forecast-day",c.setAttribute("data-day-num",`${a}`),t.appendChild(c),c.classList.add("visible"),c.classList.add("container"),n(c,e);for(const t in e){const n=document.createElement("div");if(n.className=`${t}`,"date"===t)switch(a){case 0:n.innerHTML=`Today<br>${e[t]}`;break;case 1:n.innerHTML=`Tomorrow<br>${e[t]}`;break;case 2:n.innerHTML=`Day After Torrow<br>${e[t]}`;break;default:n.innerHTML=""}else n.textContent=`${e[t]}`;if(c.appendChild(n),"conditionIcon"===t){n.innerHTML="";const a=document.createElement("img");a.src=`${e[t]}`,n.appendChild(a)}}a++}))}(e.forecast)}(function(e){const t={city:e.location.name,region:`${e.location.region}, ${e.location.country}`,time:`Local Time: ${e.location.localtime.slice(-5)}`,date:`Today: ${e.location.localtime.slice(0,10)}`},a={condition:`${e.current.temp_c} 째C, ${e.current.condition.text}`,conditionIcon:e.current.condition.icon,precip:`Precip: ${e.current.precip_mm} mm`,wind:`Wind: ${e.current.wind_kph} kph, ${e.current.wind_dir}`,feelsLike:`Gusting to ${e.current.gust_kph} kph, Feels like ${e.current.feelslike_c} 째C`},n=[];for(let t=0;t<e.forecast.forecastday.length;t++){const a=e.forecast.forecastday[t].day.daily_will_it_snow;n[t]={date:e.forecast.forecastday[t].date,conditionIcon:e.forecast.forecastday[t].day.condition.icon,condition:e.forecast.forecastday[t].day.condition.text,maxTemps:`High: ${e.forecast.forecastday[t].day.maxtemp_c} 째C`,minTemps:`Low: ${e.forecast.forecastday[t].day.mintemp_c} 째C`,humidity:`Humidity: ${e.forecast.forecastday[t].day.avghumidity}% Humidity`,precip:a?`Precipitation: ${e.forecast.forecastday[t].day.daily_chance_of_snow}% chance`:`Precipitation: ${e.forecast.forecastday[t].day.daily_chance_of_rain}% chance`,precipTotal:a?`Total: ${e.forecast.forecastday[t].day.totalsnow_cm}cm snow`:`Total: ${e.forecast.forecastday[t].day.totalprecip_mm}mm rain`,sunrise:`Sunrise: ${e.forecast.forecastday[t].astro.sunrise}`,sunset:`Sunset: ${e.forecast.forecastday[t].astro.sunset}`}}return{place:t,current:a,forecast:n}}(e))))})),t.addEventListener("submit",(e=>{e.preventDefault()}))})();